<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <title>دفع Paymob</title>
  </head>
  <body style="font-family: Cairo; text-align: center; margin-top: 50px;">
    <h2>اختبار الدفع عبر Paymob</h2>
    <input id="amount" type="number" placeholder="المبلغ بالجنيه" />
    <button id="pay">ادفع الآن</button>
    <p id="link"></p>

    <script>
      document.getElementById("pay").onclick = async () => {
        const amount = document.getElementById("amount").value;
        const res = await fetch("/.netlify/functions/create-payment", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ amount }),
        });
        const data = await res.json();
        document.getElementById("link").innerHTML =
          `<a href="${data.iframeUrl}" target="_blank">اذهب إلى صفحة الدفع</a>`;
      };
    </script>
  </body>
</html>
